// 語言系統（僅保留英文）
const translations = {
  en: {
    role: { 0: "Player", 1: "Admin", 2: "Partner", 3: "Creator" },
    ui: {
      realtimeLeaderboard: "Real-time Leaderboard",
      title: "MCSR Ranked Leaderboard",
      titleRecord: "MCSR Ranked Leaderboard",
      subtitleUnified: "Live Elo standings and historical records",
      subtitle: "Get the latest data from the official API, including season info, player roles, and Elo trends.",
      updateNow: "Update Now",
      lastUpdated: "Last updated",
      notLoaded: "Not loaded",
      loading: "Loading latest data...",
      loadingData: "Fetching latest data from MCSR Ranked...",
      dataUpdated: "",
      failedToLoad: "Failed to load latest data, using previous results.",
      noData: "No data available.",
      season: "Season",
      highestElo: "Highest Elo",
      averageElo: "Average Elo",
      top150Average: "Top 150 Average",
      countryCount: "Countries",
      top150Countries: "Top 150 Countries / Regions",
      leaderboard: "Elo",
      eloLeaderboard: "Elo",
      recordLeaderboard: "Record",
      leaderboardType: "Leaderboard Type",
      recordValue: "Record Time",
      recordNote: "Run time (mm:ss.mmm)",
      recordSeason: "Season",
      refreshInfo: "Refreshes every minute, can be manually forced to update.",
      searchPlayer: "Filter Leaderboard",
      searchPlaceholder: "Player ID",
      lookupPlayer: "Search any player",
      lookupPlaceholder: "Player ID",
      view: "View",
      rank: "Rank",
      player: "Player",
      elo: "Elo",
      role: "Role",
      country: "Country / Region",
      phasePoints: "Phase Points",
      noResults: "No matching players found.",
      basicInfo: "Basic Info",
      eloScore: "Elo Score",
      rankNum: "Rank",
      countryRegion: "Country / Region",
      seasonStats: "Season Stats",
      totalStats: "Total Stats",
      bestTime: "Best Time",
      matches: "Matches",
      wins: "Wins",
      loses: "Loses",
      completions: "Completions",
      forfeits: "Forfeits",
      highestWinStreak: "Highest Win Streak",
      currentWinStreak: "Current Win Streak",
      playtime: "Playtime",
      completionTime: "Completion Time",
      seasonResult: "Season Result",
      highestElo2: "Highest Elo",
      lowestElo: "Lowest Elo",
      phasePoint: "Phase Points",
      phasePerformance: "Phase Performance",
      phase: "Phase",
      timeInfo: "Time Info",
      firstOnline: "First Online",
      lastOnline: "Last Online",
      lastRanked: "Last Ranked",
      nextDecay: "Next Decay",
      socialLinks: "Social Links",
      displayAchievements: "Display Achievements",
      level: "Level",
      recentMatches: "Recent Matches",
      matchesCount: "matches",
      victory: "Victory",
      defeat: "Defeat",
      draw: "Draw",
      forfeit: "Forfeit",
      opponent: "Opponent",
      time: "Time",
      seed: "Seed",
      watchVod: "Watch VOD",
      dataSource: "Data Source",
      dataSourceNote: "Public API. Last updated time is based on actual response.",
      loadingPlayerInfo: "Loading player info...",
      failedToLoadPlayer: "Failed to load player info: {error}",
      playerInfoLoaded: "Player info loaded: {name}",
      searching: "Searching for player: {name}...",
      enterPlayerId: "Please enter Player ID",
      playerNotFound: "Player not found, please verify the Player ID",
      comparePlayer: "Compare Player",
      comparePrompt: "Enter another player ID to compare",
      applySearch: "Applied search filter: {query}",
      showAll: "Show all players",
      unknown: "Unknown",
      unknownRegion: "Unknown Region",
      screenshotSaved: "Screenshot saved: {filename}",
      screenshotError: "Screenshot failed: {error}",
      matchDetails: "Match Details",
      close: "Close",
      openOnMCSR: "Open on mcsrranked.com",
      loadingSplits: "Loading splits...",
      splitsUnavailable: "Splits data is not available for this match.",
      detailFull: "Detail",
      detailCompact: "Compact",
      winner: "Winner",
      eloChange: "Elo Change",
      splits: "Splits",
      timestamps: "Timestamps",
      detailLevel: "Detail Level",
      low: "Low",
      med: "Med",
      high: "High",
      all: "All",
      vs: "VS",
      totalTime: "Total Time",
      splitTime: "Split Time",
      timeDiff: "Time Difference",
      overview: "Overview",
      matches: "Matches",
      tabOverview: "Overview",
      tabMatches: "Matches",
      tabEloTrend: "Elo Trend",
      noMatches: "No matches available",
      loadMoreMatches: "Load More Matches",
      loadMoreMatchesRemaining: "Load More ({remaining} remaining)",
      loadingMoreMatches: "Loading...",
      loadedAllMatches: "All matches loaded",
      eloTrend: "Elo Trend Chart",
      eloTrendNoData: "Not enough data available to display Elo trend",
      eloTrendDescription: "This chart shows the player's recent Elo score changes over time. Use mouse wheel to zoom",
      clickToViewMatch: "Click to view match details",
      zoomHint: "Use mouse wheel to zoom, drag to pan",
      chartOptions: "Chart Options",
      chartType: "Chart Type",
      chartTypeLine: "Line",
      chartTypeArea: "Area",
      showGrid: "Show Grid",
      showPoints: "Show Points",
      showMA: "Show Moving Average",
      maPeriod: "MA Period",
      ma5: "MA5",
      ma10: "MA10",
      ma20: "MA20",
      ma30: "MA30",
      showAll: "Show All",
      lastNMatches: "Last {n} Matches",
      visibleMatches: "Visible Matches",
      resetZoom: "Reset Zoom",
    },
    achievement: {
      bestTime: "Best Time",
      seasonResult: "Season Result",
      playoffsResult: "Playoffs Result",
      netherite: "Netherite",
      ironHoe: "Iron Hoe",
      playedMatches: "Matches Played",
      highestWinStreak: "Highest Win Streak",
      wins: "Wins",
      playtime: "Playtime",
      foodless: "Foodless",
      classicRun: "Classic Run",
      armorless: "Armorless",
      ironPickless: "Iron Pickless",
    },
    seed: {
      VILLAGE: "Village",
      DESERT_TEMPLE: "Desert Temple",
      SHIPWRECK: "Shipwreck",
      BURIED_TREASURE: "Buried Treasure",
      RUINED_PORTAL: "Ruined Portal",
    },
    bastion: {
      BRIDGE: "Bridge",
      HOUSING: "Housing",
      STABLES: "Stables",
      TREASURE: "Treasure",
    },
  },
};

let currentLang = "en";

export function setCurrentLang(lang = "en") {
  currentLang = lang || "en";
}

export function getCurrentLang() {
  return currentLang;
}

export function t(key, params = {}) {
  const keys = key.split(".");
  let value = translations[currentLang];
  for (const k of keys) {
    value = value?.[k];
  }
  if (typeof value === "string") {
    return value.replace(/\{(\w+)\}/g, (match, param) => params[param] || match);
  }
  return value || key;
}
